<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Your head content remains unchanged -->
</head>
<body>
    
  <h2>Registro de Doctor</h2>

  <!-- Formulario de Registro -->
  <form id="doctorForm">
      <!-- ... Your form fields ... -->
      <button type="button" onclick="crearDoctor()">Registrar</button>
      <button type="button" onclick="editarDoctor()">Editar</button>
      <button type="button" onclick="eliminarDoctor()">Eliminar</button>
  </form>

  <!-- Table for displaying records -->
  <table class="table">
    <thead>
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Nombre</th>
        <th scope="col">Especialidad</th>
        <th scope="col">Dirección</th>
        <th scope="col">Teléfono</th>
        <th scope="col">Correo Electrónico</th>
      </tr>
    </thead>
    <tbody id="doctorTableBody">
      <!-- Table body content will be dynamically populated -->
    </tbody>
  </table>

  <script type="module">
    // Initialize Firebase
    const firebaseConfig = {
      // Your Firebase configuration here
    };

    const app = firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // Function to generate a unique ID
    function generateUniqueId() {
      return database.ref('Naim').push().key;
    }

    // Your existing JavaScript code for CRUD operations

    // Function to update the table
    function updateTable(data) {
      const tableBody = document.getElementById("doctorTableBody");
      tableBody.innerHTML = ""; // Clear existing rows

      for (const key in data) {
        const doctor = data[key];
        const row = `<tr>
          <td>${key}</td>
          <td>${doctor.name}</td>
          <td>${doctor.specialty}</td>
          <td>${doctor.address}</td>
          <td>${doctor.telephone}</td>
          <td>${doctor.mail}</td>
        </tr>`;
        tableBody.innerHTML += row;
      }
    }

    // Function to create a new doctor record
    window.crearDoctor = function () {
      const id = generateUniqueId();
      const nombre = document.getElementById("nombre").value;
      const especialidad = document.getElementById("especialidad").value;
      const direccion = document.getElementById("direccion").value;
      const telefono = document.getElementById("telefono").value;
      const correo = document.getElementById("correo").value;

      firebase.database().ref('Naim/' + id).set({
        name: nombre,
        specialty: especialidad,
        address: direccion,
        telephone: telefono,
        mail: correo
      });

      console.log("Registro creado con éxito.");
    }

    // Function to edit an existing doctor record
    window.editarDoctor = function () {
      const id = document.getElementById("idOpciones").value;

      if (!id) {
        console.log("Por favor, selecciona un ID válido para editar el registro.");
        return;
      }

      const nombre = document.getElementById("nombre").value;
      const especialidad = document.getElementById("especialidad").value;
      const direccion = document.getElementById("direccion").value;
      const telefono = document.getElementById("telefono").value;
      const correo = document.getElementById("correo").value;

      const updates = {
        name: nombre,
        specialty: especialidad,
        address: direccion,
        telephone: telefono,
        mail: correo
      };

      firebase.database().ref('Naim/' + id).update(updates);
      console.log("Registro actualizado con éxito.");
    }

    // Function to delete an existing doctor record
    window.eliminarDoctor = function () {
      const id = document.getElementById("idOpciones").value;

      if (!id) {
        console.log("Por favor, selecciona un ID válido para eliminar el registro.");
        return;
      }

      firebase.database().ref('Naim/' + id).remove();
      console.log("Registro eliminado con éxito.");
    }

    // Function to read and display records on page load
    window.onload = function () {
      const databaseRef = firebase.database().ref('Naim');
      databaseRef.on('value', (snapshot) => {
        const data = snapshot.val();
        console.log("Registros:", data);
        updateTable(data);
      });
    };
  </script>
</body>
</html>
