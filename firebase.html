<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Hola a todos .l.</h1>
    <form id="crud_form">
        <label for="nombre">Nombre</label>
        <input type="text" id="nombre">
        <br>
        <label for="apellido">Apellido</label>
        <input type="text" id="apellido">
        <br>
        <label for="edad">Edad</label>
        <input type="number" id="edad">
        <br>
        <label for="direccion">Dirección</label>
        <input type="text" id="direccion">
        <br>
        <label for="telefono">Teléfono</label>
        <input type="text" id="telefono">
        <br>
        <button type="button" onclick="crearRegistro()">Aceptar</button>
        <br>
        <label for="idOpciones">Seleccionar ID:</label>
        <select id="idOpciones">
            <!-- Options will be dynamically populated if needed -->
        </select>
        <br>
        <button type="button" onclick="leerRegistro()">Leer Registros</button>
        <button type="button" onclick="actualizarRegistro()">Actualizar Registro</button>
        <button type="button" onclick="eliminarRegistro()">Eliminar Registro</button>
    </form>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
        import { getDatabase, ref, push, onValue, update, remove } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js";
      
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "your-api-key",
            authDomain: "pruebasep-97ecc.firebaseapp.com",
            databaseURL: "https://pruebasep-97ecc-default-rtdb.firebaseio.com/",
            projectId: "pruebasep-97ecc",
            storageBucket: "pruebasep-97ecc.appspot.com",
            messagingSenderId: "374094584102",
            appId: "1:374094584102:web:a26de0b0aba01b94de89e7",
            measurementId: "G-L7005Z6GJ9"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        window.crearRegistro = function () {
            const nombre = document.getElementById("nombre").value;
            const apellido = document.getElementById("apellido").value;
            const edad = document.getElementById("edad").value;
            const direccion = document.getElementById("direccion").value;
            const telefono = document.getElementById("telefono").value;
            console.log(nombre, apellido, edad, direccion, telefono);
            push(
                ref(database, 'Naim'),
                {
                    name: nombre,
                    lastname: apellido,
                    age: edad,
                    address: direccion,
                    telephone: telefono
                }
            );
        };

        window.leerRegistro = function () {
            const databaseRef = ref(database, 'Naim');
            onValue(databaseRef, (snapshot) => {
                const data = snapshot.val();
                console.log("Registros:", data);
            });
        };

        window.actualizarRegistro = function () {
            const registroId = document.getElementById("idOpciones").value;

            if (!registroId) {
                console.log("Por favor, ingresa un ID válido para actualizar el registro.");
                return;
            }

            const nombre = document.getElementById("nombre").value;
            const apellido = document.getElementById("apellido").value;
            const edad = document.getElementById("edad").value;
            const direccion = document.getElementById("direccion").value;
            const telefono = document.getElementById("telefono").value;

            const updates = {
                name: nombre,
                lastname: apellido,
                age: edad,
                address: direccion,
                telephone: telefono
            };
            update(ref(database, `Naim/${registroId}`), updates);
            console.log("Registro actualizado con éxito.");
        };

        window.eliminarRegistro = function () {
            const registroId = document.getElementById("idOpciones").value;
            if (!registroId) {
                console.log("Por favor, ingresa un ID válido para eliminar el registro.");
                return;
            }
            remove(ref(database, `Naim/${registroId}`));
            console.log("Registro eliminado con éxito.");
        };
    </script>
</body>
</html>
